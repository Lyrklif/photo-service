import{d as L,r as h,A as f,a as m,s as _,u as w,c as y,o as r,b as l,e,n as S,I as b,_ as B,w as E,f as I,g as P,P as D,h as T,i as H,j as x,k as O,l as A,m as R,p as V,q as g,t as $}from"./index-b99a53e8.js";const C=L("photo",()=>{const n=h(null),t=h(!1),o=h(!1);return{photo:n,isLiked:t,likeProcess:o,loadPhotoData:async s=>{try{t.value=!1,n.value=null;const a=await f.getPhoto(s);n.value=a.data,t.value=a.data.liked_by_user}catch(a){console.error(a.response)}},likePhoto:async()=>{if(n.value)try{o.value=!0,await(t.value?f.unlikePhoto:f.likePhoto)(n.value.id),t.value=!t.value}catch(s){console.error(s.response)}finally{o.value=!1}}}}),j=m({__name:"LikeButton",props:{showText:{type:Boolean,default:!1}},setup(n){const t=n,o=C(),{likePhoto:u}=o,{isLiked:c,likeProcess:s}=_(o),a=w(),{redirectAuth:i}=a,{isAuth:d}=_(a),p=y(()=>c.value?"heart-fill":"heart"),v=y(()=>t.showText?"Избранное":""),k=()=>{s.value||(d.value?u():i())};return(G,U)=>(r(),l(b,{text:e(v),title:"Избранное",icon:e(p),class:S(["like-button",e(c)?"fill":""]),disabled:e(s),onClick:k},null,8,["text","icon","class","disabled"]))}});const M=B(j,[["__scopeId","data-v-28dcc237"]]),N=m({__name:"PhotoPageHeader",setup(n){return(t,o)=>(r(),l(I,null,{default:E(()=>[P(b,{to:{name:e(D).main},text:"Поиск",icon:"search",class:"search"},null,8,["to"]),P(M,{"show-text":""})]),_:1}))}}),z=m({__name:"PhotoPage",setup(n){const t=V(),o=C(),u=T(),{loading:c,error:s}=_(u),{photo:a}=_(o),i=new AbortController;o.loadPhotoData(`${t.params.id}`),H(()=>i.abort());const d=x(()=>g(()=>import("./PhotoDetails-e273cd01.js"),["assets/PhotoDetails-e273cd01.js","assets/index-b99a53e8.js","assets/index-fdbcf4cd.css","assets/PhotoDetails-62c8b308.css"])),p=x(()=>g(()=>import("./AppMessage-ca521da8.js"),["assets/AppMessage-ca521da8.js","assets/index-b99a53e8.js","assets/index-fdbcf4cd.css","assets/AppMessage-84d8840f.css"]));return(v,k)=>(r(),O("div",null,[P(N),e(c)&&!e(a)?(r(),l($,{key:0})):e(s)?(r(),l(A(e(p)),{key:1,text:e(s),type:"error",offset:""},null,8,["text"])):e(a)?(r(),l(A(e(d)),{key:2})):R("",!0)]))}});const q=B(z,[["__scopeId","data-v-283d218f"]]),J=Object.freeze(Object.defineProperty({__proto__:null,default:q},Symbol.toStringTag,{value:"Module"}));export{M as L,J as P,C as u};
