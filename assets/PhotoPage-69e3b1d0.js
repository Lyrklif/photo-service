import{j as g,r as _,d as m,s as d,o as r,c as l,g as x,f as p,u as o,P as C,k as b,l as P,a as E,m as h,q as I,t as L,n as f,_ as S}from"./index-912c0dca.js";import{b as i,A as B,I as T,L as D,a as N,u as O,c as R}from"./auth-2fe58887.js";const k=g("photo",()=>{const a=_(null),e=_(!1),t=_(!1);return{photo:a,isLiked:e,likeProcess:t,loadPhotoData:async s=>{try{e.value=!1,a.value=null;const n=await i.getPhoto(s);a.value=n.data,e.value=n.data.liked_by_user}catch(n){console.error(n.response)}},likePhoto:async()=>{if(a.value)try{t.value=!0,await(e.value?i.unlikePhoto:i.likePhoto)(a.value.id),e.value=!e.value}catch(s){console.error(s.response)}finally{t.value=!1}}}}),V=m({__name:"PhotoPageHeader",setup(a){const e=k(),{isLiked:t,likeProcess:c}=d(e);return(u,s)=>(r(),l(B,null,{default:x(()=>[p(T,{to:{name:o(C).main},text:"Поиск",icon:"search",class:"search"},null,8,["to"]),p(N,{type:o(D).button,text:"Избранное",class:"like",liked:o(t),onClick:o(e).likePhoto},null,8,["type","liked","onClick"])]),_:1}))}}),w=m({__name:"PhotoPage",setup(a){const e=L(),t=k(),c=O(),{loading:u,error:s}=d(c),{photo:n}=d(t),v=new AbortController;t.loadPhotoData(`${e.params.id}`),b(()=>v.abort());const y=P(()=>f(()=>import("./PhotoDetails-f992265e.js"),["assets/PhotoDetails-f992265e.js","assets/index-912c0dca.js","assets/index-efc39a3a.css","assets/AppPicture-f12fd6a3.js","assets/AppPicture-69498956.css","assets/auth-2fe58887.js","assets/auth-e39ed49d.css","assets/PhotoDetails-4fb739e8.css"])),A=P(()=>f(()=>import("./AppMessage-5f1f5188.js"),["assets/AppMessage-5f1f5188.js","assets/index-912c0dca.js","assets/index-efc39a3a.css","assets/AppMessage-84d8840f.css"]));return(M,$)=>(r(),E("div",null,[p(V),o(u)&&!o(n)?(r(),l(R,{key:0})):o(s)?(r(),l(h(o(A)),{key:1,text:o(s),type:"error",offset:""},null,8,["text"])):o(n)?(r(),l(h(o(y)),{key:2})):I("",!0)]))}});const j=S(w,[["__scopeId","data-v-283d218f"]]),q=Object.freeze(Object.defineProperty({__proto__:null,default:j},Symbol.toStringTag,{value:"Module"}));export{q as P,k as u};
