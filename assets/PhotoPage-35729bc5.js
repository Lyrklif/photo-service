import{d as b,r as y,A as f,a as u,s as h,o as s,c as _,w as L,b as q,e as r,u as a,P as $,I as P,L as x,f as w,g as m,h as v,i as g,t as k,_ as d,j as B,k as S,l as A,m as I,n as C,p as N}from"./index-7dff30b6.js";const p=b("photo",()=>{const e=y(null),o=y(!1),t=y(!1);return{photo:e,isLiked:o,likeProcess:t,loadPhotoData:async n=>{try{o.value=!1,e.value=null;const i=await f.getPhoto(n);e.value=i.data,o.value=i.data.liked_by_user}catch(i){console.error(i.response)}},likePhoto:async()=>{if(e.value)try{t.value=!0,await(o.value?f.unlikePhoto:f.likePhoto)(e.value.id),o.value=!o.value}catch(n){console.error(n.response)}finally{t.value=!1}}}}),D=u({__name:"PhotoPageHeader",setup(e){const o=p(),{isLiked:t,likeProcess:l}=h(o);return(c,n)=>(s(),_(q,null,{default:L(()=>[r(P,{to:{name:a($).main},text:"Поиск",icon:"search",class:"search"},null,8,["to"]),r(w,{type:a(x).button,text:"Избранное",class:"like",liked:a(t),onClick:a(o).likePhoto},null,8,["type","liked","onClick"])]),_:1}))}}),M={class:"author"},T={class:"author__text"},H={class:"author__name"},U={class:"author__username"},E=u({__name:"PhotoAuthor",props:{name:{type:String,required:!0},username:{type:String,required:!0},image:{type:String,required:!0},imageLarge:{type:String,required:!0}},setup(e){return(o,t)=>(s(),m("div",M,[r(v,{alt:e.name,src:e.image,srcset:`${e.imageLarge} 2x`,class:"author__img"},null,8,["alt","src","srcset"]),g("div",T,[g("p",H,k(e.name),1),g("p",U,"@"+k(e.username),1)])]))}});const V=d(E,[["__scopeId","data-v-4b7e1e05"]]),F={class:"buttons"},R=u({__name:"PhotoButtons",props:{downloadName:{type:String,required:!0},downloadUrl:{type:String,required:!0},liked:{type:Boolean,default:!1}},setup(e){const o=p(),{isLiked:t}=h(o);return(l,c)=>(s(),m("div",F,[r(w,{class:"button like",liked:a(t),type:a(x).button,onClick:a(o).likePhoto},null,8,["liked","type","onClick"]),r(P,{class:"button download",icon:"download",text:"Downloand",download:e.downloadName,href:e.downloadUrl,customTag:"a",target:"_blank"},null,8,["download","href"])]))}});const j=d(R,[["__scopeId","data-v-b02d6be5"]]),z={class:"container header"},G={class:"visually-hidden"},K=u({__name:"PhotoHeader",props:{title:{type:String,required:!0},name:{type:String,required:!0},username:{type:String,required:!0},image:{type:String,required:!0},imageLarge:{type:String,required:!0},download:{type:String,required:!0},liked:{type:Boolean,required:!0}},setup(e){return(o,t)=>(s(),m("header",z,[g("h1",G,k(e.title),1),r(V,{name:e.name,username:e.username,image:e.image,imageLarge:e.imageLarge},null,8,["name","username","image","imageLarge"]),r(j,{class:"buttons",downloadName:e.title,downloadUrl:e.download,liked:e.liked},null,8,["downloadName","downloadUrl","liked"])]))}});const O=d(K,[["__scopeId","data-v-e2fcf666"]]),J=u({__name:"PhotoFull",props:{alt:{type:String,required:!0},src:{type:String,required:!0},srcMedium:{type:String,required:!0},srcLarge:{type:String,required:!0}},setup(e){return(o,t)=>(s(),_(v,{class:"image",alt:e.alt,src:e.src,srcset:`${e.srcMedium} 2x`,source:[{srcset:`${e.srcLarge} 2x, ${e.srcMedium}`,media:"(min-width: 768px)"}]},null,8,["alt","src","srcset","source"]))}});const Q=d(J,[["__scopeId","data-v-19cc6fa6"]]),W={class:"bg-image-wp"},X=u({__name:"PhotoBackground",props:{alt:{type:String,required:!0},image:{type:String,required:!0},imageLarge:{type:String,required:!0}},setup(e){return(o,t)=>(s(),m("div",W,[r(v,{alt:e.alt,src:e.image,srcset:`${e.imageLarge} 2x`,class:"bg-image",lazy:""},null,8,["alt","src","srcset"])]))}});const Y=d(X,[["__scopeId","data-v-9a62ff28"]]);function Z(){return{device:B(()=>{const o=navigator.platform.toLowerCase(),t=/mac|win|linux/i.test(o),l=/tablet|ipad/i.test(o),c=/(android|webos|iphone|ipad|ipod|blackberry|windows phone)/.test(o);return{isDesktop:t,isTablet:l,isMobile:c}})}}const ee={class:"container"},te=u({__name:"PhotoContend",setup(e){const o=p(),{photo:t,isLiked:l}=h(o),{device:c}=Z();return(n,i)=>(s(),m("main",null,[r(O,{title:a(t).alt_description,name:a(t).user.name,username:a(t).user.username,image:a(t).user.profile_image.medium,imageLarge:a(t).user.profile_image.large,download:a(t).links.download,liked:a(l),class:"photo-header"},null,8,["title","name","username","image","imageLarge","download","liked"]),g("div",ee,[r(Q,{"src-large":a(t).urls.full,"src-medium":a(t).urls.regular,src:a(t).urls.small,alt:a(t).alt_description},null,8,["src-large","src-medium","src","alt"])]),a(c).isDesktop?(s(),_(Y,{key:0,alt:a(t).alt_description,image:a(t).urls.regular,imageLarge:a(t).urls.full},null,8,["alt","image","imageLarge"])):S("",!0)]))}});const ae=d(te,[["__scopeId","data-v-caaa96a2"]]),oe=u({__name:"PhotoPage",setup(e){const o=C(),t=p(),l=A(),{loading:c,error:n}=h(l),{photo:i}=h(t);return t.loadPhotoData(`${o.params.id}`),(se,re)=>(s(),m("div",null,[r(D),a(c)&&!a(i)?(s(),_(N,{key:0})):a(n)?(s(),_(I,{key:1,text:a(n),type:"error",offset:""},null,8,["text"])):a(i)?(s(),_(ae,{key:2})):S("",!0)]))}});const le=d(oe,[["__scopeId","data-v-6f1a00a1"]]);export{le as default};
