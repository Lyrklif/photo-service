import{d as k,r as _,A as i,a as P,s as d,o as r,c as l,w as m,b as v,e as p,u as o,P as y,I as g,L as A,f as x,g as C,h as S,i as I,j as L,k as b,l as B,m as E,_ as T,n as D,p as N}from"./index-5d19477a.js";const h=k("photo",()=>{const s=_(null),e=_(!1),t=_(!1);return{photo:s,isLiked:e,likeProcess:t,loadPhotoData:async a=>{try{e.value=!1,s.value=null;const n=await i.getPhoto(a);s.value=n.data,e.value=n.data.liked_by_user}catch(n){console.error(n.response)}},likePhoto:async()=>{if(s.value)try{t.value=!0,await(e.value?i.unlikePhoto:i.likePhoto)(s.value.id),e.value=!e.value}catch(a){console.error(a.response)}finally{t.value=!1}}}}),w=P({__name:"PhotoPageHeader",setup(s){const e=h(),{isLiked:t,likeProcess:c}=d(e);return(u,a)=>(r(),l(v,null,{default:m(()=>[p(g,{to:{name:o(y).main},text:"Поиск",icon:"search",class:"search"},null,8,["to"]),p(x,{type:o(A).button,text:"Избранное",class:"like",liked:o(t),onClick:o(e).likePhoto},null,8,["type","liked","onClick"])]),_:1}))}}),O=P({__name:"PhotoPage",setup(s){const e=E(),t=h(),c=C(),{loading:u,error:a}=d(c),{photo:n}=d(t);t.loadPhotoData(`${e.params.id}`);const f=S(()=>T(()=>import("./PhotoContend-d7efdcad.js"),["assets/PhotoContend-d7efdcad.js","assets/index-5d19477a.js","assets/index-627c8eae.css","assets/PhotoContend-7ade9f0e.css"]));return(V,j)=>(r(),I("div",null,[p(w),o(u)&&!o(n)?(r(),l(D,{key:0})):o(a)?(r(),l(L,{key:1,text:o(a),type:"error",offset:""},null,8,["text"])):o(n)?(r(),l(b(o(f)),{key:2})):B("",!0)]))}});const R=N(O,[["__scopeId","data-v-686aa9e8"]]),$=Object.freeze(Object.defineProperty({__proto__:null,default:R},Symbol.toStringTag,{value:"Module"}));export{$ as P,h as u};
